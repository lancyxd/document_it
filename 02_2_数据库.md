## 1、sqlite

```sqlite
sqlite3(SQLite 是不区分大小写)
sqlite3 testDB.db
.help
.show
.timer on
.schema sqlite_master
.databases
.quit

ATTACH DATABASE 'testDB.db' as 'TEST';  //SQLite 附加数据库
DETACH DATABASE 'TEST1';  //把 'TEST1' 从 testDB.db 中分离出来

CREATE TABLE COMPANY(
   ID INT PRIMARY KEY     NOT NULL,
   NAME           TEXT    NOT NULL,
   AGE            INT     NOT NULL,
   ADDRESS        CHAR(50),
   SALARY         REAL
);

CREATE TABLE DEPARTMENT(
   ID INT PRIMARY KEY      NOT NULL,
   DEPT           CHAR(50) NOT NULL,
   EMP_ID         INT      NOT NULL
);

.tables
.schema COMPANY
DROP TABLE COMPANY;

//对齐显示表的所有信息
.header on
.mode column
.width 10, 20, 10
INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY)
VALUES (1, 'Paul', 32, 'California', 20000.00 );
INSERT INTO COMPANY VALUES (7, 'James', 24, 'Houston', 10000.00 );
UPDATE COMPANY SET ADDRESS = 'Texas' WHERE ID = 6;
DELETE FROM COMPANY WHERE ID = 7;
select *from COMPANY;
SELECT tbl_name FROM sqlite_master WHERE type = 'table';
SELECT COUNT(*) AS "RECORDS" FROM COMPANY; 
SELECT * FROM COMPANY WHERE AGE  LIKE '2%';
SELECT * FROM COMPANY WHERE ADDRESS  LIKE '%-%';
SELECT * FROM COMPANY WHERE AGE  LIKE '%2%';
SELECT * FROM COMPANY WHERE AGE  GLOB '2*';//GLOB 用来匹配通配符指定模式的文本值
SELECT * FROM COMPANY LIMIT 3,6; //显示第4、第5、第6行
SELECT * FROM COMPANY LIMIT 6; //显示前6行
SELECT * FROM COMPANY LIMIT 3 offset 2;//显示第3、第4、第5行
SELECT * FROM COMPANY ORDER BY SALARY ASC;
SELECT NAME, SUM(SALARY) FROM COMPANY GROUP BY NAME; //NAME相同的，会合并到一个组里，工资相加
SELECT * FROM COMPANY GROUP BY name HAVING count(name) < 2;

//运算符
.mode line
select 10+20;
select 60 | 13;
select  (60 << 2);
```



## 2、influxdb

```sqlite
1.常用操作(语句后面不用加分号,数据库名testDB，表名weather)
# 管理数据库 influx
# 创建数据库 CREATE DATABASE "testDB"
# 显示所有数据库 SHOW DATABASES
# 删除数据库 DROP DATABASE "testDB"
# 使用数据库 use testDB
# 显示该数据库中的表 show measurements
# 创建表,直接在插入数据的时候指定表名 insert weather,altitude=1000,area=北 temperature=11,humidity=-4

curl -i -XPOST 'http://localhost:8086/write?db=testDB' --data-binary 'weather,altitude=1000,area=北 temperature=11,humidity=-4'
# 删除表 DROP MEASUREMENT "weather"
# 查 SELECT * FROM weather ORDER BY time DESC LIMIT 3
curl -G 'http://localhost:8086/query?pretty=true' --data-urlencode "db=testDB" --data-urlencode "q=SELECT * FROM weather ORDER BY time DESC LIMIT 3"
# series:所有在数据库中的数据，都需要通过图表来展示，而这个series表示这个表里面的数据，可以在图表上画成几条线：通过tags排列组合算出来。
 
#保存策略 Retention Policies 没有提供数据的删除与修改方法,可以通过数据保存策略来实现数据删除(32d，保存32天，32天之前的数据将被删除)
SHOW RETENTION POLICIES ON "testDB"
CREATE RETENTION POLICY "rp_name_test" ON "testDB" DURATION 32d REPLICATION 1 DEFAULT
DROP RETENTION POLICY "rp_name_test" ON "testDB"
alter RETENTION POLICY "rp_name" ON "testDB" DURATION 32d REPLICATION 1 DEFAULT
 
#用户管理
show users
CREATE USER "test" WITH PASSWORD 'mxxx@123'
CREATE USER "test1" WITH PASSWORD 'mxxx@123' WITH ALL PRIVILEGES
创建用户 CREATE USER "username" WITH PASSWORD 'password'
创建管理员权限的用户 CREATE USER "username" WITH PASSWORD 'password' WITH ALL PRIVILEGES
删除用户 DROP USER "username" 显示用户 show users
```

## 3、couchbase

- **couchbase指令**

  ```mysql
  /opt/couchbase/bin/cbq -u root -p passwd -engine=http://localhost:8091/ # 启动
  
  # 连接bucket
  ./cbq --engine="http://127.0.0.1:8093/"
  ./cbq -engine="http://beer-sample:passwd@127.0.0.1:8091/"   // 连某个带密码的bucket
  ```

- **常用N1QL查询语句**

  ```mysql
  select语句：选择(restful-sample为bucket的名字；后面不需要加RETURNING *，加的话会报错)
  SELECT * FROM `beer-sample`  WHERE name= "21st Amendment Brewery Cafe";
  SELECT city,country FROM `beer-sample` WHERE country = "United States add";
  SELECT * FROM `beer-sample` LIMIT 3; //返回的json数据key均为"beer-sample"
  SELECT * FROM `beer-sample` where  city="San Francisco" limit 1;
  SELECT * FROM `beer-sample` as p1 limit 2; //返回json数据的key均为p1
  SELECT *  FROM   `beer-sample` t  WHERE  country = "United States add" AND geo.lat = 37.7825;（t为数据桶的别名）
  SELECT a1,a2,a3.b1,a4[1].c2 FROM `beer-sample` where a1=1;
  
  insert into `beer-sample` (key,value) values ("person9",{"name":"Jack","age":"6","hobby":"ball","height":"150","weigth":"30"}) returning *;
  
  delete语句：
  delete from `beer-sample` use keys "person9" returning *;
  delete from `beer-sample` p  use keys "person4" returning p; //备注:p为bucket的别名
  delete from `beer-sample` p where p.deviceid="applian11" returning p.hobby;
  
  update语句：（一般加returning *）
  update `beer-sample`  use keys "person9" set age="9" returning *;   document中没有age字段会直接新加age字段
  update `beer-sample`  use keys "person9" unset age returning *;  若document中存在age字段，将age字段删除
  
  upsert语句：（insert和update的组合；存在即更新，不存在即创建）
  upsert into `beer-sample` (key,value) values("person5",{"name":"lily","age":"6"}) returning *;
  upsert into `beer-sample` (key,value) values("person5",{"name":"lily","age":"6","hobby":["ball","running"]}) returning *;
  
  # couchbase界面操作  http://xx.xx.xxx.xxx:8091
  创建桶ADD BUCKET（创建一个名为test-sample的桶）
  给新的桶创建索引CREATE PRIMARY INDEX `test-primary` ON `test-sample`;
  插入数据
  ```

  

  

  

## 4、memcache

  `缓存数据库:通常与mcroute实现Memcached的高可用`

  [基于mcroute实现Memcached的高可用HA](https://www.ipcpu.com/2017/05/mcroute-memcached-ha/)

  [深入理解Memcache原理](https://blog.csdn.net/wusuopuBUPT/article/details/18238003)

- **启动与[安装](https://www.runoob.com/memcached/memcached-install.html)**

  ```shell
  memcached -p 11211 -m 16m -u root -vv  #启动 -p监听端口  -m分配给mc的内存数量，单位MB  -u运行mc的用户  
  telnet 127.0.0.1 11211  # 连接 ，退出  quit
  -v  代表打印普通的错误或者警告类型的日志信息
  -vv  比-v打印的日志更详细，包含了客户端命令和server端的响应信息
  -vvv  则是最详尽的，甚至包含了内部的状态信息打印
  ```

- **指令**

  ```shell
  set foo 0 0 3   # key flags exptime bytes  ，flags：可以包括键值对的整型参数，客户机使用它存储关于键值对的额外信息
  bar
  
  get foo
  get key1 key2 key3
  get foo 0 3
  gets key1 key2 key3
  
  set testkey 0 900 1
  incr testkey 1
  decr testkey 1
  
  delete newkey
  
  add  # 将value存储在指定的key中，若key已存在，则不会更新数据（过期的key会更新），之前的值扔保持相同，并获得响应NOT_STORED
  add newkey 0 900 10
  data_value
  
  replace # 替换已存在的key的value值（若key不存在，则替换失败，获得响应NOT_STORED）
  replace newkey 0 900 11
  data_value1
  
  append # 向已存在 key(键) 的 value(数据值) 后面追加数据。prepend 前面追加数据
  append newkey 0 900 5
  astr1
  
  cas # 执行一个检查并设置的操作，它仅在当前客户端最后一次取值后，该key 对应的值没有被其他客户端修改的情况下， 才能够将值写入。
  gets newkey     # unique_cas_token通过 gets 命令获取的一个唯一的64位值 ，最后一列的数字 7 代表了newkey的 CAS 令牌。
  VALUE newkey 0 21 7
  cas newkey 0 900 5 7 
  ```

- **统计相关指令**

  ```shell
  stats  返回统计信息，如 PID(进程号)、版本号、连接数
  stats items  显示各个 slab 中 item 的数目和存储时长(最后一次访问距离现在的秒数)
  stats slabs  命令用于显示各个slab的信息，包括chunk的大小、数目、使用情况等
  stats sizes  命令用于显示所有item的大小和个数
  stats settings
  flush_all  命令用于清理缓存中的所有 key=>value(键=>值) 对
  ```







